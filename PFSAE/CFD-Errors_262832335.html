<!DOCTYPE html>
<html>
    <head>
        <title>Purdue Formula SAE : CFD Errors</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Purdue Formula SAE</a></span>
                            </li>
                                                    <li>
                                <span><a href="Purdue-Formula-SAE-Home_127569448.html">Purdue Formula SAE Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Aerodynamics_129007673.html">Aerodynamics</a></span>
                            </li>
                                                    <li>
                                <span><a href="259297338.html">Education | AER</a></span>
                            </li>
                                                    <li>
                                <span><a href="261751356.html">Fundamentals | CFD</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Purdue Formula SAE : CFD Errors
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Zhang, Chenkai</span>, last modified on Jun 07, 2023
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong><u><strong>Error Overview</strong></u></strong></p><p>CFD simulations have a lot of errors. And as you might imagine, the goal for us as users of CFD is do everything in our power to reduce CFD errors. Therefore, it is important for you know what kind of errors are there, where they come from, and how to minimize them. I found most online sources either skip errors or only very briefly cover errors, and I totally disagree with the trend. Coming from an user of CFD rather than wannabe methodologist, out of the entire AAE 512 Computational Aerodynamics class that I took, I feel like I learned the most in the error section. So this page will essentially cover a condensed and simplified version (mostly in terms of math and derivations) of that.</p><p><strong><u><strong>Truncation Error</strong></u></strong></p><p><em>Truncation error</em> is an inevitable result of solving things using a computer. No computer can store all decimal places of a floating point number, so there will always be some errors. This error exists on everything from handheld calculator to the most powerful supercomputer in the world, as long as it's digital. If you have coded any language that's lower level then Python, you have probably encountered float and double type of floating point numbers, they correspond to single and double precision. Double precision can store double the number of decimal places, making it more accurate.</p><p>There are also things on the the algorithm side you can do to reduce truncation error. For example, rather than calculating the values of flow variable in between iterations, calculate the change in the value flow variable ensures reduced truncation error.</p><p><em>Overflow </em>and <em>underflow </em>are both concerns for CFD analysis. Since numbers are represented by a finite number of bits, not all arbitrarily large numbers can be represented. Underflow is the opposite, since only a certain number of decimal places are stored, numbers between 0 and 0.00...001 can not be stored. </p><p><strong><u>Discretization Errors</u></strong></p><p>In CFD analysis, both the governing equation and the computational domain need to discretized to allow numerical solution to be obtained. To derive the discretized governing equation, Taylor series are used. Since Taylor series is an infinite series, not all terms can be calculated (that will take infinitely long time). Therefore, Taylor series has to be truncated. The <em>order of accuracy</em> of a scheme depends on the last term that is not truncated. For example, the first order upwind scheme truncates all terms higher than the second order term (x^2 term); and second order central differencing scheme truncates all terms higher than the third order term (x^3 term).</p><p>The discretization of the governing the equation and the computational domain also come with another issue: the equation you are solving changed. Instead of solving the the original PDE, you are solving a discretized version of the PDE with Taylor series truncated. By taking temporal and spatial steps to 0, you can reverse the discretization process and get the actual PDE that is represented by the FDE/FVE. This new PDE is called the <em>modified equation</em>. The modified equation method is instrumental in both stability and error analysis.</p><p>You are perhaps thinking, given infinite computer resources, you can simply take spatial step and temporal step to 0 to minimize discretization error, that is not the case. As you have already seen with wall y+ requirements, small grid mesh can pose its own issues. And as for temporal discretization, too little of time steps can lead to high transportive error, which we will talk about next. So CFD is this weird thing where there is a sweet spot where the error is the lowest.</p><p><u><strong>Conservation Error</strong></u></p><p>Since CFD is based on the conservation of mass, momentum, and energy, it should be no surprise that, if the you lose any of those, you are in trouble. This type of error is called <em>conservation error</em>. Conservation error arise from the discretization scheme, so there isn't much you can do about it, but understanding of the concept is still important.</p><p>If your derivation of the FDE/FVE contains the usage of chain rule, you will end up with the <em>non-conservative form</em> of the FDE/FVE, since chain rule has the built in assumption of being continuous. Specifically, if a FDE/FVE has variable outside of derivative, the FDE/FVE is non-conservative. If the scheme you are using is not conservative, you better not use it for shock capturing or analyzing flow in a contained space without inlets or outlet (e.g. fuel sloshing analysis). However, even if a FDE/FVE is non-conservative, a conservative algorithm can still be used to ensure conservation.</p><p><u><strong>Transportive Error </strong></u><strong><u>Overview</u></strong></p><p><em>Transportive error</em> is error in how flow variables propagate. There are two modes of flow variable propagation: convection and diffusion.</p><p>Diffusion is transport through random molecular collisions. It transports in all directions.</p><p>Convection is transport through velocity, meaning it is always in the direction of velocity.</p><p>If the transportive properties of FDE/FVE is different than that of the original PDE, the difference is called <em>transportive error</em>.</p><p><u><strong>Fourier Error Analysis (Unsteady Only)</strong></u></p><p>To really get into transportive error, first you need to gain a basic understand of <em>Fourier error analysis</em>. This is the part where it can get a little esoteric if you don't know what Fourier series, which is an advanced concept taught into MA 303. But to sum it up, Fourier series is an infinite series of sines and cosines of different wave length and amplitude that add together to form arbitrarily shaped curves. Fourier series is extremely powerful and it is used everywhere from CFD to telecommunication to detection of nuclear bombs to solving partial differential equations analytically.</p><p>To perform Fourier error analysis, you take the modified equation and put a disturbance represented by a Fourier series in complex number form on every point, then an amplification factor can be derived (I'm skipping a lot of math here). This amplification factor, a complex number, is useful for two thing: error analysis and stability analysis. We will cover the stability part later.</p><p>Note even though Fourier error analysis is only applicable to unsteady problem, you will gain insights into behavior of various scheme that's useful in steady state problems. </p><p><u><strong>Diffusion Error</strong></u></p><p><em>Diffusion error</em> arises from the convection term, because that's just how Taylor series work out. Diffusion error is often the biggest source of errors in CFD. A lot of effort have gone into minimizing diffusion error, but it's a difficult thing to do. </p><p>Physical diffusion in fluids arise from viscosity. Viscosity is the fluid properties that damps disturbances out. Therefore, numerical diffusion behaves the same way, it damps disturbances out. These disturbances includes instabilities in CFD. Therefore, diffusion error is what prevents CFD from exploding. Too low of diffusion CFD becomes unstable. This is where the problem is, you want low diffusion error to maximize accuracy, but you want high diffusion error to ensure stability. Adding to this issue is the fact that physical diffusion is small compared to convection, at least in any practical engineering flows, so it is hard to capture.</p><p>Using Fourier error analysis, one can prove that diffusion error arise from even order terms. Since the magnitude of amplification factor only depends on even order terms, diffusion error can be obtained by comparing the magnitude of the amplification factor for the original PDE and the modified equation.</p><p>The insight provided by Fourier error analysis also explains the behavior the reason why first order upwind scheme is so stable - the leading order error term is second order, meaning it's highly dominated by diffusion error. This is also the reason why first order upwind can't be trusted - it's too diffusive. In fact, first order upwind scheme can be achieved by taking the second order upwind scheme and add an artificial second order diffusion term.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/262832335/262834676.png" data-image-src="attachments/262832335/262834676.png" data-unresolved-comment-count="0" data-linked-resource-id="262834676" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2023-6-7_18-4-23.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="262832335" data-linked-resource-container-version="4" alt=""></span><span style="color: rgb(255,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/262832335/262834677.png" data-image-src="attachments/262832335/262834677.png" data-unresolved-comment-count="0" data-linked-resource-id="262834677" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2023-6-7_18-5-25.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="262832335" data-linked-resource-container-version="4" alt=""></span></span></p><p>In a diffusion dominated environment, you can expect flow to behave as though viscosity is increased. For example, increased boundary layer thickness, increased shear layer thickness in free shear, etc.</p><p><span style="color: rgb(0,0,0);">As a user of CFD codes, you can reduce diffusion error by aligning mesh with flow direction, choosing a different discretization scheme, and controlling grid spacing and time steps.</span></p><p><u><strong>Dispersion Error</strong></u></p><p><em>Dispersion error</em> arises when different wave length when travels at different speeds. This creates a sort of scattering effect, causing the solutions to wiggle. It can be proved with Fourier error analysis that dispersion error arises from odd order terms 3rd and up. Since the phase angle of amplification factor only depends on odd order terms, dispersion error can be obtained by comparing phase angle of the amplification factor for the original PDE and the modified equation.</p><p><span style="color: rgb(255,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/262832335/262834678.png" data-image-src="attachments/262832335/262834678.png" data-unresolved-comment-count="0" data-linked-resource-id="262834678" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2023-6-7_18-6-6.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="262832335" data-linked-resource-container-version="4" alt=""></span></span></p><p><span style="color: rgb(0,0,0);">As a user of CFD codes, you can reduce dispersion error by choosing a different discretization scheme and controlling grid spacing and time steps.</span></p><p><u><strong>Aliasing Error</strong></u></p><p>Given that the computational domain is discretized, you would expect there to be largest and smallest possible wave lengths. Consider a 1-D problem, the smallest wavelength possible 2 times the grid spacing; and the largest wavelength possible is number of grid points times grid space.</p><p><span style="color: rgb(255,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/262832335/262834679.png" data-image-src="attachments/262832335/262834679.png" data-unresolved-comment-count="0" data-linked-resource-id="262834679" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2023-6-7_18-6-28.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="262832335" data-linked-resource-container-version="4" alt=""></span></span></p><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">This is not a problem if the original PDE is linear, since all Fourier components created by Fourier analysis falls in between largest and smallest wavelengths. However, if you have a nonlinear PDE, the Fourier components will multiply with each other, creating wavelength that are too small or too large to be resolved, introducing <em>aliasing error</em>. Further more, aliasing error is also a source of instability if the small wavelength are not removed. </span></span></p><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">Too small of wavelengths is a often a big issue in solving the Navier-Stokes equation directly using LES. Large eddies tends to dissolve into small eddies through vortex stretching, and these small eddies can be too small to be resolved. Therefore, filtering is big part of any LES algorithm.</span></span></p><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">As a user of CFD codes, you need to ensure your grid size is small enough to resolve all necessary wavelengths, and you need to make sure to choose appropriate smoothing and/or filtering functions whenever available.</span></span></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/262832335/262834676.png">image-2023-6-7_18-4-23.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/262832335/262834677.png">image-2023-6-7_18-5-25.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/262832335/262834678.png">image-2023-6-7_18-6-6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/262832335/262834679.png">image-2023-6-7_18-6-28.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 04, 2024 13:25</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
