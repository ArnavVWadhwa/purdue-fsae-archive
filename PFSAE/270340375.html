<!DOCTYPE html>
<html>
    <head>
        <title>Purdue Formula SAE : PF24 Lapsim Studies | SUS</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Purdue Formula SAE</a></span>
                            </li>
                                                    <li>
                                <span><a href="Purdue-Formula-SAE-Home_127569448.html">Purdue Formula SAE Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Suspension_129009826.html">Suspension</a></span>
                            </li>
                                                    <li>
                                <span><a href="259297355.html">Design | SUS</a></span>
                            </li>
                                                    <li>
                                <span><a href="261751191.html">Design PF24 | SUS</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Purdue Formula SAE : PF24 Lapsim Studies | SUS
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> MacNab, Zachary Robert</span>, last modified on Aug 30, 2023
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div id="expander-171758200" class="expand-container"><div role="heading" aria-level="6" id="expander-control-171758200" class="expand-control"><button type="button" id="expand-button-171758200" class="aui-button aui-button-link aui-button-link-icon-text" aria-expanded="true" aria-controls="expander-content-171758200" ><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down" aria-hidden="true"></span><span class="expand-control-text conf-macro-render">PF24_AeroTrade_NoUT</span></button></div><div role="region" id="expander-content-171758200" class="expand-content" aria-labelledby="expand-button-171758200"><div id="expander-665194621" class="expand-container"><div role="heading" aria-level="6" id="expander-control-665194621" class="expand-control"><button type="button" id="expand-button-665194621" class="aui-button aui-button-link aui-button-link-icon-text" aria-expanded="true" aria-controls="expander-content-665194621" ><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down" aria-hidden="true"></span><span class="expand-control-text conf-macro-render">Vehicle Param File</span></button></div><div role="region" id="expander-content-665194621" class="expand-content" aria-labelledby="expand-button-665194621"><p><span><span style="color: rgb(0,128,19);">%% Define Vehicle Parameters</span></span><br/><span><span style="color: rgb(0,128,19);">%</span></span><br/><span><span style="color: rgb(0,128,19);">% Vehicle Name:</span></span><br/><span><span style="color: rgb(0,128,19);">% Brief Description about Vehicle:</span></span><br/><span><span style="color: rgb(0,128,19);">%</span></span></p><p><span><span style="color: rgb(14,0,255);">global </span>r_max accel grip deccel lateral cornering gear shift_points<span style="color: rgb(14,0,255);">...</span></span><br/><span> top_speed r_min path_boundaries tire_radius shift_time<span style="color: rgb(14,0,255);">...</span></span><br/><span> powertrainpackage track_width path_boundaries_ax</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 1: Input Tire Model</span></span><br/><span><span style="color: rgb(0,128,19);">% this section is required, everything should be pre-loaded so no need to</span></span><br/><span><span style="color: rgb(0,128,19);">% touch any of this, unless you want to change the tire being evaluated.</span></span><br/><span><span style="color: rgb(0,128,19);">% The only things you might want to change are the scaling factors at the</span></span><br/><span><span style="color: rgb(0,128,19);">% bottom of the section</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Tire Model')</span></span></p><p><span><span style="color: rgb(0,128,19);">% First we load in the lateral tire force model, which is a Pacejka model</span></span><br/><span><span style="color: rgb(0,128,19);">% then load in coefficients for Magic Formula 5.2 Tire Model:</span></span><br/><span>run(<span style="color: rgb(167,9,245);">&quot;LC0_16_7p5_10_on_7in_10psi_FAKE.m&quot;</span>)</span><br/><span>s.LMUY = 0.625;</span><br/><span>s.LMUX = 0.625;</span></p><p><span><span style="color: rgb(0,128,19);">% % Next you load in the longitudinal tire model, which for now is just a</span></span><br/><span><span style="color: rgb(0,128,19);">% % CSAPS spline fit to the TTC data</span></span><br/><span><span style="color: rgb(0,128,19);">% % find your pathname and filename for the tire you want to load in</span></span><br/><span><span style="color: rgb(0,128,19);">% tire_filename = 'Hoosier_R25B_18.0x7.5-10_FX_12psi.mat';</span></span><br/><span><span style="color: rgb(0,128,19);">% load(tire_filename)</span></span></p><p><span><span style="color: rgb(0,128,19);">%%Keith's Tire Models</span></span><br/><span><span style="color: rgb(0,128,19);">%run (&quot;LC0_16_7p5_10_on_7in_10psi.m&quot;);</span></span><br/><span><span style="color: rgb(0,128,19);">%s.LMUY = .62;</span></span><br/><span><span style="color: rgb(0,128,19);">%s.LMUX = .625;</span></span><br/><span><span style="color: rgb(0,128,19);">%run 'MF5p2_CoeffLoad.m';</span></span></p><p><span>tire_radius = 8/12; <span style="color: rgb(0,128,19);">%ft</span></span><br/><span>tyreRadius = tire_radius/3.28; <span style="color: rgb(0,128,19);">% converts to meters</span></span></p><p><span><span style="color: rgb(0,128,19);">% finally, we have some scaling factors for longitudinal (x) and lateral</span></span><br/><span><span style="color: rgb(0,128,19);">% (y) friction. You can use these to tune the lap sim to correlate better </span></span><br/><span><span style="color: rgb(0,128,19);">% to logged data </span></span><br/><span>sf_x = .55;</span><br/><span>sf_y = .47; </span><br/><span><span style="color: rgb(0,128,19);">%% Section 2: Input Powertrain Model</span></span><br/><span><span style="color: rgb(0,128,19);">% change whatever you want here</span></span><br/><span><span style="color: rgb(0,128,19);">% just keep your units consistent please</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Engine Model')</span></span><br/><span><span style="color: rgb(0,128,19);">% Torque in ftlbf</span></span><br/><span><span style="color: rgb(0,128,19);">% engineSpeed = [4644 4692 4730 4758 4761 4767 4793 4836 4882 4932 4990 5038 5088 5137 5184 5234 5282 5330 5378 5431 5483 5531 5579 5628 5676 5726 5777 5829 5877 5927 5985 6034 6081 6130 6178 6229 6278 6324 6372 6423 6478 6525 6574 6623 6671 6718 6767 6821 6870 6919 6981 7034 7082 7134 7192 7247 7299 7357 7422 7489 7547 7614 7681 7743 7811 7885 7965 8035 8111 8186 8259 8335 8417 8501 8571 8633 8686 8734 8780 8832 8896 8986 9088 9229 9457 9692 9987 10255 10528 10737 10920 11053 11157 11243 11316 11377 11435 11500 11552 11600 11650 11694 11744 11794 11844 11894 11944 11994 12044 12094 12144 12194 12244 12294 12344 12394 12444 12494 12544 12594 12644 12645 12745];</span></span><br/><span><span style="color: rgb(0,128,19);">% engineTq = [11.376 24.14799999 36.92000001 48.35600001 50.856 53.35599999 55.85600001 57.938 58.79199999 59.646 60.49999999 61.18800001 61.71599999 62.244 62.77200001 62.512 62.154 61.79600001 61.406 60.966 60.52599999 60.094 60.42599999 60.75800001 61.09 61.444 61.80800001 62.17 62.38799999 62.47799999 62.56800001 62.512 62.258 62.004 61.77999999 61.60399999 61.42800001 61.32 61.296 61.27 61.15000001 60.952 60.75399999 60.676 60.64400001 60.612 61.06000001 61.52799999 62.004 62.5 62.99599999 63.47799999 63.95000001 64.42 65.118 65.82199999 66.65799999 67.676 68.694 70.30399999 71.97599999 73.404 74.52199999 75.636 76.63000001 77.622 78.506 79.32800001 80.01200001 80.37800001 80.74 80.71599999 80.69199999 80.44999999 80.142 79.81 79.456 79.18399999 79.03600001 78.86799999 78.63999999 78.26200001 77.04399999 75.758 73.72399999 71.668 69.17 66.704 65.09999999 63.53999999 62.774 62.054 61.778 61.55 61.574 61.598 61.26839106 60.93878212 60.60917318 60.27956424 59.9499553 59.62034635 59.29073743 58.96112849 58.63151957 58.30191063 57.97230169 57.64269275 57.31308381 56.65386592 55.99464804 55.33543016 54.6762123 54.01699441 53.35777653 52.69855867 52.03934079 51.38012291 50.72090502 50.06168716 49.40246928 0 0];</span></span><br/><span><span style="color: rgb(0,128,19);">% redline = 12000; </span></span></p><p><span>engineSpeed = [5094 5119 5144 5169 5194 5219 5244 5269 5294 5319 5344 5369 5394 5419 5444 5469 5494 5519 5544 5569 5594 5619 5644 5669 5694 5719 5744 5769 5794 5819 5844 5869 5894 5919 5944 5969 5994 6019 6044 6069 6094 6119 6144 6169 6194 6219 6244 6269 6294 6319 6344 6369 6394 6419 6444 6469 6494 6519 6544 6569 6594 6619 6644 6669 6694 6719 6744 6769 6794 6819 6844 6869 6894 6919 6944 6969 6994 7019 7044 7069 7094 7119 7144 7169 7194 7219 7244 7269 7294 7319 7344 7369 7394 7419 7444 7469 7494 7519 7544 7569 7594 7619 7644 7669 7694 7719 7744 7769 7794 7819 7844 7869 7894 7919 7944 7969 7994 8019 8044 8069 8094 8119 8144 8169 8194 8219 8244 8269 8294 8319 8344 8369 8394 8419 8444 8469 8494 8519 8544 8569 8594 8619 8644 8669 8694 8719 8744 8769 8794 8819 8844 8869 8894 8919 8944 8969 8994 9019 9044 9069 9094 9119 9144 9169 9194 9219 9244 9269 9294 9319 9344 9369 9394 9419 9444 9469 9494 9519 9544 9569 9594 9619 9644 9669 9694 9719 9744 9769 9794 9819 9844 9869 9894 9919 9944 9969 9994 10019 10044 10069 10094 10119 10144 10169 10194 10219 10244 10269 10294 10319 10344 10369 10394 10419 10444 10469 10494 10519 10544 10569 10594 10619 10644 10669 10694 10719 10744 10769 10794 10819 10844 10869 10894 10919 10944 10969 10994 11019 11044 11069 11094 11119 11144 11169 11194 11219 11244 11269 11294 11319 11344 11369 11394 11419 11444 11469 11494 11519 11544 11569 11594 11619 11644 11669 11694 11719 11744 11769 11794 11819 11844 11869 11894 11919 11944 11969 11994 12019 12044 12069 12094 12119 12144 12169 12194 12219 12244 12269 12294 12319 12344];</span><br/><span>engineTq = [23 24 23 23 23 22 22 22 21 21 21 21 21 21 21 21 22 22 21 21 21 21 21 21 21 21 21 21 21 21 21 22 22 22 22 23 24 24 24 25 26 26 26 26 27 28 28 28 28 29 29 30 30 31 31 32 33 33 34 34 34 35 35 36 36 36 36 36 36 37 36 36 36 36 36 36 36 35 35 35 35 35 34 34 34 34 34 34 34 34 34 34 34 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 34 34 34 34 35 35 35 35 36 36 36 36 36 37 37 37 38 38 38 38 39 39 39 40 40 40 41 41 41 42 42 42 42 42 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 42 42 42 42 42 42 42 42 41 41 41 41 41 41 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 40 40 40 40 40 40 40 40 39 39 39 39 39 39 39 38 38 38 38 38 38 38 38 37 37 37 37 37 37 37 37 37 37 37 36 36 36 36 36 36 36 36 36 36 35 35 35 35 35 35];</span><br/><span>redline = 12000; </span><br/><span>finalDrive = 29/11;</span><br/><span>gear = [2.583, 2.000, 1.667, 1.444, 1.286, 1.150]; <span style="color: rgb(0,128,19);">% R6 Gears</span></span><br/><span>primaryReduction = 2.073;</span></p><p><span>start_gear = 1;</span><br/><span>end_gear = 5;</span></p><p><span><span style="color: rgb(0,128,19);">% engineSpeed = [6000:100:13900]; %[6000:100:14100]; % RPM</span></span><br/><span><span style="color: rgb(0,128,19);">% % torque should be in N-m:</span></span><br/><span><span style="color: rgb(0,128,19);">% engineTq = [41.57 42.98 44.43 45.65 46.44 47.09 47.52 48.58 49.57 50.41 51.43 51.48 51 49.311 48.94 48.66 49.62 49.60 47.89 47.91 48.09 48.57 49.07 49.31 49.58 49.56 49.84 50.10 50.00 50.00 50.75 51.25 52.01 52.44 52.59 52.73 53.34 53.72 52.11 52.25 51.66 50.5 50.34 50.50 50.50 50.55 50.63 50.17 50.80 49.73 49.35 49.11 48.65 48.28 48.28 47.99 47.68 47.43 47.07 46.67 45.49 45.37 44.67 43.8 43.0 42.3 42.00 41.96 41.70 40.43 39.83 38.60 38.46 38.46 38.46 38.46 38.46 38.46 38.46 38.46];</span></span><br/><span><span style="color: rgb(0,128,19);">% primaryReduction = 2.073;</span></span><br/><span><span style="color: rgb(0,128,19);">% gear = [2.583, 2.000, 1.667, 1.444, 1.286, 1.150]; % transmission gear ratios</span></span><br/><span><span style="color: rgb(0,128,19);">% finalDrive = 37/12; % large sprocket/small sprocket</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% shiftpoint = 14000; % optimal shiftpoint for most gears [RPM]</span></span></p><p><span>drivetrainLosses = .95; <span style="color: rgb(0,128,19);">% percent of torque that makes it to the rear wheels </span></span><br/><span>shift_time = .08; <span style="color: rgb(0,128,19);">% seconds</span></span><br/><span>T_lock = 90; <span style="color: rgb(0,128,19);">% differential locking torque (0 = open, 1 = locked)</span></span><br/><span><span style="color: rgb(0,128,19);">%%%%%%</span></span><br/><span>[shiftpoint,~] = shift_points_v1(engineSpeed',engineTq',drivetrainLosses,redline,gear,finalDrive,primaryReduction,start_gear,end_gear,tire_radius*2); <span style="color: rgb(0,128,19);">%% GO IN TO FUNCTION AND CAN MAKE THRUST CHART AT THE BOTTOM</span></span><br/><span><span style="color: rgb(0,128,19);">%%%%%%</span></span><br/><span><span style="color: rgb(0,128,19);">% Intermediary Calcs/Save your results into the workspace</span></span><br/><span>gearTot = gear(end)*finalDrive*primaryReduction;</span><br/><span>T_lock = T_lock/100;</span><br/><span>powertrainpackage = {engineSpeed (engineTq*1.3558179483) primaryReduction gear finalDrive min(shiftpoint) drivetrainLosses redline};</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 3: Vehicle Architecture</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Vehicle Characteristics')</span></span><br/><span><span style="color: rgb(0,128,19);">% These are the basic vehicle architecture primary inputs:</span></span><br/><span>LLTD = 50; <span style="color: rgb(0,128,19);">% Front lateral load transfer distribution (%)</span></span><br/><span>W = 590; <span style="color: rgb(0,128,19);">% vehicle + driver weight (lbs)</span></span><br/><span>WDF = 49; <span style="color: rgb(0,128,19);">% front weight distribution (%)</span></span><br/><span>cg = 10/12; <span style="color: rgb(0,128,19);">% center of gravity height (ft)</span></span><br/><span>l = 60.5/12; <span style="color: rgb(0,128,19);">% wheelbase (ft)</span></span><br/><span>twf = 47/12; <span style="color: rgb(0,128,19);">% front track width (ft)</span></span><br/><span>twr = 46/12; <span style="color: rgb(0,128,19);">% rear track width (ft)</span></span><br/><span>Iz = 2208; <span style="color: rgb(0,128,19);">% Yaw Inertia (lbm*ft^2)</span></span></p><p><span><span style="color: rgb(0,128,19);">% some intermediary calcs you don't have to touch</span></span><br/><span>LLTD = LLTD/100;</span><br/><span>WDF = WDF/100;</span><br/><span>m = W/32.2; <span style="color: rgb(0,128,19);">% mass (lbm)</span></span><br/><span>WF = W*WDF; <span style="color: rgb(0,128,19);">% front weight</span></span><br/><span>WR = W*(1-WDF); <span style="color: rgb(0,128,19);">% rear weight</span></span><br/><span>a = l*(1-WDF); <span style="color: rgb(0,128,19);">% front axle to cg</span></span><br/><span>b = l*WDF; <span style="color: rgb(0,128,19);">% rear axle to cg</span></span><br/><span>tw = twf;</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 4: Input Suspension Kinematics</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Suspension Kinematics')</span></span><br/><span><span style="color: rgb(0,128,19);">% this section is actually optional. So if you set everything to zero, you</span></span><br/><span><span style="color: rgb(0,128,19);">% can essentially leave this portion out of the analysis. Useful if you are</span></span><br/><span><span style="color: rgb(0,128,19);">% only trying to explore some higher level relationships</span></span></p><p><span><span style="color: rgb(0,128,19);">% Pitch and roll gradients define how much the car's gonna move around</span></span><br/><span>rg_f = 0; <span style="color: rgb(0,128,19);">% front roll gradient (deg/g)</span></span><br/><span>rg_r = 0; <span style="color: rgb(0,128,19);">% rear roll gradient (deg/g)</span></span><br/><span><span style="color: rgb(0,128,19);">% pg = 0; % pitch gradient (deg/g)</span></span><br/><span>pg_b = 0; <span style="color: rgb(0,128,19);">% braking pitch gradient (deg/g) * &lt; 0</span></span><br/><span>pg_a = 0; <span style="color: rgb(0,128,19);">% accel pitch gradient (deg/g) * &gt; 0</span></span><br/><span>WRF = 233.33; <span style="color: rgb(0,128,19);">% front and rear ride rates (lbs/in) pitch and bump * bump technically does actuate ARB</span></span><br/><span>WRR = 233.33; </span><br/><span><span style="color: rgb(0,128,19);">% WRF_r = 252.51; % front and rear ride rates (lbs/in) rol</span></span><br/><span><span style="color: rgb(0,128,19);">% WRR_r = 252.51; </span></span></p><p><span><span style="color: rgb(0,128,19);">% then you can select your camber alignment</span></span><br/><span>IA_staticf = 0; <span style="color: rgb(0,128,19);">% front static camber angle (deg)</span></span><br/><span>IA_staticr = 0; <span style="color: rgb(0,128,19);">% rear static camber angle (deg)</span></span><br/><span>IA_compensationf = 0; <span style="color: rgb(0,128,19);">% front camber compensation (%)</span></span><br/><span>IA_compensationr = 0; <span style="color: rgb(0,128,19);">% rear camber compensation (%)</span></span></p><p><span><span style="color: rgb(0,128,19);">% lastly you can select your kingpin axis parameters</span></span><br/><span>casterf = 0; <span style="color: rgb(0,128,19);">% front caster angle (deg)</span></span><br/><span>KPIf = 0; <span style="color: rgb(0,128,19);">% front kingpin inclination angle (deg)</span></span><br/><span>casterr = 0;</span><br/><span>KPIr = 0;</span><br/><span>steer_max = 26; <span style="color: rgb(0,128,19);">% max steered angle of front wheels [deg]</span></span></p><p><span><span style="color: rgb(0,128,19);">% intermediary calcs, plz ignore</span></span><br/><span>IA_staticf = deg2rad(IA_staticf); <span style="color: rgb(0,128,19);">% front static camber angle (deg)</span></span><br/><span>IA_staticr = deg2rad(IA_staticr); <span style="color: rgb(0,128,19);">% rear static camber angle (deg)</span></span><br/><span>IA_compensationf = IA_compensationf/100; <span style="color: rgb(0,128,19);">% front camber compensation (%)</span></span><br/><span>IA_compensationr = IA_compensationr/100; <span style="color: rgb(0,128,19);">% rear camber compensation (%)</span></span><br/><span>casterf = deg2rad(casterf);</span><br/><span>KPIf = deg2rad(KPIf);</span><br/><span>casterr = deg2rad(casterr);</span><br/><span>KPIr = deg2rad(KPIr);</span><br/><span>IA_roll_inducedf = asin(2/twf/12);</span><br/><span>IA_roll_inducedr = asin(2/twr/12);</span><br/><span>IA_gainf = IA_roll_inducedf*IA_compensationf;</span><br/><span>IA_gainr = IA_roll_inducedr*IA_compensationr;</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 5: Input Aero Parameters</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Aero Model')</span></span><br/><span>rho_air = 1.225*0.062427960576145; <span style="color: rgb(0,128,19);">% density lbm/ft^3</span></span></p><p><span>Cl = 3.10846; <span style="color: rgb(0,128,19);">% real coeff lift [m^2]</span></span><br/><span>Cd = 1.54; <span style="color: rgb(0,128,19);">% real coeff drag [m^2]</span></span></p><p><span>Cl = .5*rho_air*Cl*10.7639/32.2; <span style="color: rgb(0,128,19);">% [lbm/ft]</span></span><br/><span>Cd = .5*rho_air*Cd*10.7639/32.2; <span style="color: rgb(0,128,19);">% [lbm/ft]</span></span><br/><span>CoP = 50; <span style="color: rgb(0,128,19);">%54; % front downforce distribution (%)</span></span></p><p><span><span style="color: rgb(0,128,19);">% Intermediary Calculations</span></span><br/><span>CoP = CoP/100;</span></p><p><span><span style="color: rgb(0,128,19);">% Ride height change [in] use this to be more accurate with changes in</span></span><br/><span><span style="color: rgb(0,128,19);">% suspension and aero platform as changing pitch and roll gradients affect</span></span><br/><span><span style="color: rgb(0,128,19);">% how height we can run the car + RH means we can lower it - RH means it is</span></span><br/><span><span style="color: rgb(0,128,19);">% raised. Should use SUS calcultor to predict all ride rates and correct</span></span><br/><span><span style="color: rgb(0,128,19);">% setup</span></span><br/><span>RH = 0;</span></p><p><span><span style="color: rgb(0,128,19);">%% Aero Map</span></span><br/><span><span style="color: rgb(0,128,19);">%</span></span><br/><span><span style="color: rgb(0,128,19);">% Pitch_Map = deg2rad([0.189406846 0.378809552 0.568203979 0.757585989 0.946951447 -0.189406846 -0.378809552 -0.568203979]); % Pitch angle [deg]</span></span><br/><span><span style="color: rgb(0,128,19);">% Cl_pitch = [0.084 0.099 0.069 -0.062 -0.109 0.029 0.034 0.063]*.5*rho_air*10.7639/32.2; % Change in Cl with pitch</span></span><br/><span><span style="color: rgb(0,128,19);">% Cd_pitch = [0.01 -0.005 -0.002 -0.004 0.011 0.046 0.029 0.048]*.5*rho_air*10.7639/32.2; % Change in Cd with pitch</span></span><br/><span><span style="color: rgb(0,128,19);">% CoP_pitch = [0.006 0.03 0.042 -0.002 -0.018 -0.031 -0.041 -0.055]; % Change in %F with pitch</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cl_pitch = csaps(Pitch_Map,Cl_pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cd_pitch = csaps(Pitch_Map,Cd_pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.CoP_pitch = csaps(Pitch_Map,CoP_pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% RH_Map = [0.5 0.25 -0.1 -0.2 -0.3 -0.4 -0.5]; % Coupled change in ride height [in]</span></span><br/><span><span style="color: rgb(0,128,19);">% Cl_rh = [-0.288 -0.135 0.093 0.139 0.155 0.202 0.192]*.5*rho_air*10.7639/32.2; % Change in Cl with coupled ride height</span></span><br/><span><span style="color: rgb(0,128,19);">% Cd_rh = [0.052 0.04 -0.001 -0.001 -0.017 -0.047 -0.07]*.5*rho_air*10.7639/32.2; % Change in Cd with coupled ride height</span></span><br/><span><span style="color: rgb(0,128,19);">% CoP_rh = [-0.034 -0.027 0.006 0.007 0.021 0.035 0.048]; % Change in %F with coupled ride height</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cl_rh = csaps(RH_Map,Cl_rh);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cd_rh = csaps(RH_Map,Cd_rh);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.CoP_rh = csaps(RH_Map,CoP_rh);</span></span></p><p><span>Pitch_Map = deg2rad([0 .5]); <span style="color: rgb(0,128,19);">% Pitch angle [deg]</span></span><br/><span>Cl_pitch = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cl with pitch</span></span><br/><span>Cd_pitch = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cd with pitch</span></span><br/><span>CoP_pitch = [0 0]; <span style="color: rgb(0,128,19);">% Change in %F with pitch</span></span><br/><span>Map.Cl_pitch = csaps(Pitch_Map,Cl_pitch);</span><br/><span>Map.Cd_pitch = csaps(Pitch_Map,Cd_pitch);</span><br/><span>Map.CoP_pitch = csaps(Pitch_Map,CoP_pitch);</span></p><p><span>RH_Map = [0 .5]; <span style="color: rgb(0,128,19);">% Coupled change in ride height [in]</span></span><br/><span>Cl_rh = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cl with coupled ride height</span></span><br/><span>Cd_rh = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cd with coupled ride height</span></span><br/><span>CoP_rh = [0 0]; <span style="color: rgb(0,128,19);">% Change in %F with coupled ride height</span></span><br/><span>Map.Cl_rh = csaps(RH_Map,Cl_rh);</span><br/><span>Map.Cd_rh = csaps(RH_Map,Cd_rh);</span><br/><span>Map.CoP_rh = csaps(RH_Map,CoP_rh);</span><br/><span><span style="color: rgb(0,128,19);">% i = 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% for RH = -.5:.01:.5</span></span><br/><span><span style="color: rgb(0,128,19);">% cl(i) = fnval(Map.Cl_rh,RH);</span></span><br/><span><span style="color: rgb(0,128,19);">% rh(i)= RH;</span></span><br/><span><span style="color: rgb(0,128,19);">% i = i + 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% end</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% figure()</span></span><br/><span><span style="color: rgb(0,128,19);">% plot(rh,cl)</span></span><br/><span><span style="color: rgb(0,128,19);">% xlabel('Ride Height [in]')</span></span><br/><span><span style="color: rgb(0,128,19);">% ylabel('Change in Cl')</span></span></p><p><span><span style="color: rgb(0,128,19);">% i = 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% for Pitch = deg2rad(-.6:.01:1)</span></span><br/><span><span style="color: rgb(0,128,19);">% cl(i) = fnval(Map.Cl_pitch,Pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% pitch(i)= rad2deg(Pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% i = i + 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% end</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% figure()</span></span><br/><span><span style="color: rgb(0,128,19);">% plot(pitch,cl)</span></span><br/><span><span style="color: rgb(0,128,19);">% xlabel('Pitch Angle [deg]')</span></span><br/><span><span style="color: rgb(0,128,19);">% ylabel('Change in Cl')</span></span></p></div></div><div id="expander-12149288" class="expand-container"><div role="heading" aria-level="6" id="expander-control-12149288" class="expand-control"><button type="button" id="expand-button-12149288" class="aui-button aui-button-link aui-button-link-icon-text" aria-expanded="true" aria-controls="expander-content-12149288" ><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down" aria-hidden="true"></span><span class="expand-control-text conf-macro-render">Change Log</span></button></div><div role="region" id="expander-content-12149288" class="expand-content" aria-labelledby="expand-button-12149288"><p>What was done to the file</p><ul><li>Weight 610 → 590 (lbf)</li><li>Cl to -3.10846</li><li>Cd to 1.54346</li><li>CG 12.22 → 10 (inches)</li></ul></div></div><p class="auto-cursor-target"><strong>RESULTS:</strong></p><p class="auto-cursor-target"><strong><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/270340375/270340391.png" data-image-src="attachments/270340375/270340391.png" data-unresolved-comment-count="0" data-linked-resource-id="270340391" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2023-8-30_22-32-0.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="270340375" data-linked-resource-container-version="4" alt=""></span></strong></p></div></div><div id="expander-820379190" class="expand-container"><div role="heading" aria-level="6" id="expander-control-820379190" class="expand-control"><button type="button" id="expand-button-820379190" class="aui-button aui-button-link aui-button-link-icon-text" aria-expanded="true" aria-controls="expander-content-820379190" ><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down" aria-hidden="true"></span><span class="expand-control-text conf-macro-render">PF24_AeroTrade_withUT</span></button></div><div role="region" id="expander-content-820379190" class="expand-content" aria-labelledby="expand-button-820379190"><div id="expander-1722757434" class="expand-container"><div role="heading" aria-level="6" id="expander-control-1722757434" class="expand-control"><button type="button" id="expand-button-1722757434" class="aui-button aui-button-link aui-button-link-icon-text" aria-expanded="true" aria-controls="expander-content-1722757434" ><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down" aria-hidden="true"></span><span class="expand-control-text conf-macro-render">Vehicle Param File</span></button></div><div role="region" id="expander-content-1722757434" class="expand-content" aria-labelledby="expand-button-1722757434"><p><span><span style="color: rgb(0,128,19);">%% Define Vehicle Parameters</span></span><br/><span><span style="color: rgb(0,128,19);">%</span></span><br/><span><span style="color: rgb(0,128,19);">% Vehicle Name:</span></span><br/><span><span style="color: rgb(0,128,19);">% Brief Description about Vehicle:</span></span><br/><span><span style="color: rgb(0,128,19);">%</span></span></p><p><span><span style="color: rgb(14,0,255);">global </span>r_max accel grip deccel lateral cornering gear shift_points<span style="color: rgb(14,0,255);">...</span></span><br/><span> top_speed r_min path_boundaries tire_radius shift_time<span style="color: rgb(14,0,255);">...</span></span><br/><span> powertrainpackage track_width path_boundaries_ax</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 1: Input Tire Model</span></span><br/><span><span style="color: rgb(0,128,19);">% this section is required, everything should be pre-loaded so no need to</span></span><br/><span><span style="color: rgb(0,128,19);">% touch any of this, unless you want to change the tire being evaluated.</span></span><br/><span><span style="color: rgb(0,128,19);">% The only things you might want to change are the scaling factors at the</span></span><br/><span><span style="color: rgb(0,128,19);">% bottom of the section</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Tire Model')</span></span></p><p><span><span style="color: rgb(0,128,19);">% First we load in the lateral tire force model, which is a Pacejka model</span></span><br/><span><span style="color: rgb(0,128,19);">% then load in coefficients for Magic Formula 5.2 Tire Model:</span></span><br/><span>run(<span style="color: rgb(167,9,245);">&quot;LC0_16_7p5_10_on_7in_10psi_FAKE.m&quot;</span>)</span><br/><span>s.LMUY = 0.625;</span><br/><span>s.LMUX = 0.625;</span></p><p><span><span style="color: rgb(0,128,19);">% % Next you load in the longitudinal tire model, which for now is just a</span></span><br/><span><span style="color: rgb(0,128,19);">% % CSAPS spline fit to the TTC data</span></span><br/><span><span style="color: rgb(0,128,19);">% % find your pathname and filename for the tire you want to load in</span></span><br/><span><span style="color: rgb(0,128,19);">% tire_filename = 'Hoosier_R25B_18.0x7.5-10_FX_12psi.mat';</span></span><br/><span><span style="color: rgb(0,128,19);">% load(tire_filename)</span></span></p><p><span><span style="color: rgb(0,128,19);">%%Keith's Tire Models</span></span><br/><span><span style="color: rgb(0,128,19);">%run (&quot;LC0_16_7p5_10_on_7in_10psi.m&quot;);</span></span><br/><span><span style="color: rgb(0,128,19);">%s.LMUY = .62;</span></span><br/><span><span style="color: rgb(0,128,19);">%s.LMUX = .625;</span></span><br/><span><span style="color: rgb(0,128,19);">%run 'MF5p2_CoeffLoad.m';</span></span></p><p><span>tire_radius = 8/12; <span style="color: rgb(0,128,19);">%ft</span></span><br/><span>tyreRadius = tire_radius/3.28; <span style="color: rgb(0,128,19);">% converts to meters</span></span></p><p><span><span style="color: rgb(0,128,19);">% finally, we have some scaling factors for longitudinal (x) and lateral</span></span><br/><span><span style="color: rgb(0,128,19);">% (y) friction. You can use these to tune the lap sim to correlate better </span></span><br/><span><span style="color: rgb(0,128,19);">% to logged data </span></span><br/><span>sf_x = .55;</span><br/><span>sf_y = .47; </span><br/><span><span style="color: rgb(0,128,19);">%% Section 2: Input Powertrain Model</span></span><br/><span><span style="color: rgb(0,128,19);">% change whatever you want here</span></span><br/><span><span style="color: rgb(0,128,19);">% just keep your units consistent please</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Engine Model')</span></span><br/><span><span style="color: rgb(0,128,19);">% Torque in ftlbf</span></span><br/><span><span style="color: rgb(0,128,19);">% engineSpeed = [4644 4692 4730 4758 4761 4767 4793 4836 4882 4932 4990 5038 5088 5137 5184 5234 5282 5330 5378 5431 5483 5531 5579 5628 5676 5726 5777 5829 5877 5927 5985 6034 6081 6130 6178 6229 6278 6324 6372 6423 6478 6525 6574 6623 6671 6718 6767 6821 6870 6919 6981 7034 7082 7134 7192 7247 7299 7357 7422 7489 7547 7614 7681 7743 7811 7885 7965 8035 8111 8186 8259 8335 8417 8501 8571 8633 8686 8734 8780 8832 8896 8986 9088 9229 9457 9692 9987 10255 10528 10737 10920 11053 11157 11243 11316 11377 11435 11500 11552 11600 11650 11694 11744 11794 11844 11894 11944 11994 12044 12094 12144 12194 12244 12294 12344 12394 12444 12494 12544 12594 12644 12645 12745];</span></span><br/><span><span style="color: rgb(0,128,19);">% engineTq = [11.376 24.14799999 36.92000001 48.35600001 50.856 53.35599999 55.85600001 57.938 58.79199999 59.646 60.49999999 61.18800001 61.71599999 62.244 62.77200001 62.512 62.154 61.79600001 61.406 60.966 60.52599999 60.094 60.42599999 60.75800001 61.09 61.444 61.80800001 62.17 62.38799999 62.47799999 62.56800001 62.512 62.258 62.004 61.77999999 61.60399999 61.42800001 61.32 61.296 61.27 61.15000001 60.952 60.75399999 60.676 60.64400001 60.612 61.06000001 61.52799999 62.004 62.5 62.99599999 63.47799999 63.95000001 64.42 65.118 65.82199999 66.65799999 67.676 68.694 70.30399999 71.97599999 73.404 74.52199999 75.636 76.63000001 77.622 78.506 79.32800001 80.01200001 80.37800001 80.74 80.71599999 80.69199999 80.44999999 80.142 79.81 79.456 79.18399999 79.03600001 78.86799999 78.63999999 78.26200001 77.04399999 75.758 73.72399999 71.668 69.17 66.704 65.09999999 63.53999999 62.774 62.054 61.778 61.55 61.574 61.598 61.26839106 60.93878212 60.60917318 60.27956424 59.9499553 59.62034635 59.29073743 58.96112849 58.63151957 58.30191063 57.97230169 57.64269275 57.31308381 56.65386592 55.99464804 55.33543016 54.6762123 54.01699441 53.35777653 52.69855867 52.03934079 51.38012291 50.72090502 50.06168716 49.40246928 0 0];</span></span><br/><span><span style="color: rgb(0,128,19);">% redline = 12000; </span></span></p><p><span>engineSpeed = [5094 5119 5144 5169 5194 5219 5244 5269 5294 5319 5344 5369 5394 5419 5444 5469 5494 5519 5544 5569 5594 5619 5644 5669 5694 5719 5744 5769 5794 5819 5844 5869 5894 5919 5944 5969 5994 6019 6044 6069 6094 6119 6144 6169 6194 6219 6244 6269 6294 6319 6344 6369 6394 6419 6444 6469 6494 6519 6544 6569 6594 6619 6644 6669 6694 6719 6744 6769 6794 6819 6844 6869 6894 6919 6944 6969 6994 7019 7044 7069 7094 7119 7144 7169 7194 7219 7244 7269 7294 7319 7344 7369 7394 7419 7444 7469 7494 7519 7544 7569 7594 7619 7644 7669 7694 7719 7744 7769 7794 7819 7844 7869 7894 7919 7944 7969 7994 8019 8044 8069 8094 8119 8144 8169 8194 8219 8244 8269 8294 8319 8344 8369 8394 8419 8444 8469 8494 8519 8544 8569 8594 8619 8644 8669 8694 8719 8744 8769 8794 8819 8844 8869 8894 8919 8944 8969 8994 9019 9044 9069 9094 9119 9144 9169 9194 9219 9244 9269 9294 9319 9344 9369 9394 9419 9444 9469 9494 9519 9544 9569 9594 9619 9644 9669 9694 9719 9744 9769 9794 9819 9844 9869 9894 9919 9944 9969 9994 10019 10044 10069 10094 10119 10144 10169 10194 10219 10244 10269 10294 10319 10344 10369 10394 10419 10444 10469 10494 10519 10544 10569 10594 10619 10644 10669 10694 10719 10744 10769 10794 10819 10844 10869 10894 10919 10944 10969 10994 11019 11044 11069 11094 11119 11144 11169 11194 11219 11244 11269 11294 11319 11344 11369 11394 11419 11444 11469 11494 11519 11544 11569 11594 11619 11644 11669 11694 11719 11744 11769 11794 11819 11844 11869 11894 11919 11944 11969 11994 12019 12044 12069 12094 12119 12144 12169 12194 12219 12244 12269 12294 12319 12344];</span><br/><span>engineTq = [23 24 23 23 23 22 22 22 21 21 21 21 21 21 21 21 22 22 21 21 21 21 21 21 21 21 21 21 21 21 21 22 22 22 22 23 24 24 24 25 26 26 26 26 27 28 28 28 28 29 29 30 30 31 31 32 33 33 34 34 34 35 35 36 36 36 36 36 36 37 36 36 36 36 36 36 36 35 35 35 35 35 34 34 34 34 34 34 34 34 34 34 34 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 33 34 34 34 34 35 35 35 35 36 36 36 36 36 37 37 37 38 38 38 38 39 39 39 40 40 40 41 41 41 42 42 42 42 42 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 42 42 42 42 42 42 42 42 41 41 41 41 41 41 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 41 40 40 40 40 40 40 40 40 39 39 39 39 39 39 39 38 38 38 38 38 38 38 38 37 37 37 37 37 37 37 37 37 37 37 36 36 36 36 36 36 36 36 36 36 35 35 35 35 35 35];</span><br/><span>redline = 12000; </span><br/><span>finalDrive = 29/11;</span><br/><span>gear = [2.583, 2.000, 1.667, 1.444, 1.286, 1.150]; <span style="color: rgb(0,128,19);">% R6 Gears</span></span><br/><span>primaryReduction = 2.073;</span></p><p><span>start_gear = 1;</span><br/><span>end_gear = 5;</span></p><p><span><span style="color: rgb(0,128,19);">% engineSpeed = [6000:100:13900]; %[6000:100:14100]; % RPM</span></span><br/><span><span style="color: rgb(0,128,19);">% % torque should be in N-m:</span></span><br/><span><span style="color: rgb(0,128,19);">% engineTq = [41.57 42.98 44.43 45.65 46.44 47.09 47.52 48.58 49.57 50.41 51.43 51.48 51 49.311 48.94 48.66 49.62 49.60 47.89 47.91 48.09 48.57 49.07 49.31 49.58 49.56 49.84 50.10 50.00 50.00 50.75 51.25 52.01 52.44 52.59 52.73 53.34 53.72 52.11 52.25 51.66 50.5 50.34 50.50 50.50 50.55 50.63 50.17 50.80 49.73 49.35 49.11 48.65 48.28 48.28 47.99 47.68 47.43 47.07 46.67 45.49 45.37 44.67 43.8 43.0 42.3 42.00 41.96 41.70 40.43 39.83 38.60 38.46 38.46 38.46 38.46 38.46 38.46 38.46 38.46];</span></span><br/><span><span style="color: rgb(0,128,19);">% primaryReduction = 2.073;</span></span><br/><span><span style="color: rgb(0,128,19);">% gear = [2.583, 2.000, 1.667, 1.444, 1.286, 1.150]; % transmission gear ratios</span></span><br/><span><span style="color: rgb(0,128,19);">% finalDrive = 37/12; % large sprocket/small sprocket</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% shiftpoint = 14000; % optimal shiftpoint for most gears [RPM]</span></span></p><p><span>drivetrainLosses = .95; <span style="color: rgb(0,128,19);">% percent of torque that makes it to the rear wheels </span></span><br/><span>shift_time = .08; <span style="color: rgb(0,128,19);">% seconds</span></span><br/><span>T_lock = 90; <span style="color: rgb(0,128,19);">% differential locking torque (0 = open, 1 = locked)</span></span><br/><span><span style="color: rgb(0,128,19);">%%%%%%</span></span><br/><span>[shiftpoint,~] = shift_points_v1(engineSpeed',engineTq',drivetrainLosses,redline,gear,finalDrive,primaryReduction,start_gear,end_gear,tire_radius*2); <span style="color: rgb(0,128,19);">%% GO IN TO FUNCTION AND CAN MAKE THRUST CHART AT THE BOTTOM</span></span><br/><span><span style="color: rgb(0,128,19);">%%%%%%</span></span><br/><span><span style="color: rgb(0,128,19);">% Intermediary Calcs/Save your results into the workspace</span></span><br/><span>gearTot = gear(end)*finalDrive*primaryReduction;</span><br/><span>T_lock = T_lock/100;</span><br/><span>powertrainpackage = {engineSpeed (engineTq*1.3558179483) primaryReduction gear finalDrive min(shiftpoint) drivetrainLosses redline};</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 3: Vehicle Architecture</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Vehicle Characteristics')</span></span><br/><span><span style="color: rgb(0,128,19);">% These are the basic vehicle architecture primary inputs:</span></span><br/><span>LLTD = 50; <span style="color: rgb(0,128,19);">% Front lateral load transfer distribution (%)</span></span><br/><span>W = 610; <span style="color: rgb(0,128,19);">% vehicle + driver weight (lbs)</span></span><br/><span>WDF = 49; <span style="color: rgb(0,128,19);">% front weight distribution (%)</span></span><br/><span>cg = 11.5/12; <span style="color: rgb(0,128,19);">% center of gravity height (ft)</span></span><br/><span>l = 60.5/12; <span style="color: rgb(0,128,19);">% wheelbase (ft)</span></span><br/><span>twf = 47/12; <span style="color: rgb(0,128,19);">% front track width (ft)</span></span><br/><span>twr = 46/12; <span style="color: rgb(0,128,19);">% rear track width (ft)</span></span><br/><span>Iz = 2208; <span style="color: rgb(0,128,19);">% Yaw Inertia (lbm*ft^2)</span></span></p><p><span><span style="color: rgb(0,128,19);">% some intermediary calcs you don't have to touch</span></span><br/><span>LLTD = LLTD/100;</span><br/><span>WDF = WDF/100;</span><br/><span>m = W/32.2; <span style="color: rgb(0,128,19);">% mass (lbm)</span></span><br/><span>WF = W*WDF; <span style="color: rgb(0,128,19);">% front weight</span></span><br/><span>WR = W*(1-WDF); <span style="color: rgb(0,128,19);">% rear weight</span></span><br/><span>a = l*(1-WDF); <span style="color: rgb(0,128,19);">% front axle to cg</span></span><br/><span>b = l*WDF; <span style="color: rgb(0,128,19);">% rear axle to cg</span></span><br/><span>tw = twf;</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 4: Input Suspension Kinematics</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Suspension Kinematics')</span></span><br/><span><span style="color: rgb(0,128,19);">% this section is actually optional. So if you set everything to zero, you</span></span><br/><span><span style="color: rgb(0,128,19);">% can essentially leave this portion out of the analysis. Useful if you are</span></span><br/><span><span style="color: rgb(0,128,19);">% only trying to explore some higher level relationships</span></span></p><p><span><span style="color: rgb(0,128,19);">% Pitch and roll gradients define how much the car's gonna move around</span></span><br/><span>rg_f = 0; <span style="color: rgb(0,128,19);">% front roll gradient (deg/g)</span></span><br/><span>rg_r = 0; <span style="color: rgb(0,128,19);">% rear roll gradient (deg/g)</span></span><br/><span><span style="color: rgb(0,128,19);">% pg = 0; % pitch gradient (deg/g)</span></span><br/><span>pg_b = 0; <span style="color: rgb(0,128,19);">% braking pitch gradient (deg/g) * &lt; 0</span></span><br/><span>pg_a = 0; <span style="color: rgb(0,128,19);">% accel pitch gradient (deg/g) * &gt; 0</span></span><br/><span>WRF = 233.33; <span style="color: rgb(0,128,19);">% front and rear ride rates (lbs/in) pitch and bump * bump technically does actuate ARB</span></span><br/><span>WRR = 233.33; </span><br/><span><span style="color: rgb(0,128,19);">% WRF_r = 252.51; % front and rear ride rates (lbs/in) rol</span></span><br/><span><span style="color: rgb(0,128,19);">% WRR_r = 252.51; </span></span></p><p><span><span style="color: rgb(0,128,19);">% then you can select your camber alignment</span></span><br/><span>IA_staticf = 0; <span style="color: rgb(0,128,19);">% front static camber angle (deg)</span></span><br/><span>IA_staticr = 0; <span style="color: rgb(0,128,19);">% rear static camber angle (deg)</span></span><br/><span>IA_compensationf = 0; <span style="color: rgb(0,128,19);">% front camber compensation (%)</span></span><br/><span>IA_compensationr = 0; <span style="color: rgb(0,128,19);">% rear camber compensation (%)</span></span></p><p><span><span style="color: rgb(0,128,19);">% lastly you can select your kingpin axis parameters</span></span><br/><span>casterf = 0; <span style="color: rgb(0,128,19);">% front caster angle (deg)</span></span><br/><span>KPIf = 0; <span style="color: rgb(0,128,19);">% front kingpin inclination angle (deg)</span></span><br/><span>casterr = 0;</span><br/><span>KPIr = 0;</span><br/><span>steer_max = 26; <span style="color: rgb(0,128,19);">% max steered angle of front wheels [deg]</span></span></p><p><span><span style="color: rgb(0,128,19);">% intermediary calcs, plz ignore</span></span><br/><span>IA_staticf = deg2rad(IA_staticf); <span style="color: rgb(0,128,19);">% front static camber angle (deg)</span></span><br/><span>IA_staticr = deg2rad(IA_staticr); <span style="color: rgb(0,128,19);">% rear static camber angle (deg)</span></span><br/><span>IA_compensationf = IA_compensationf/100; <span style="color: rgb(0,128,19);">% front camber compensation (%)</span></span><br/><span>IA_compensationr = IA_compensationr/100; <span style="color: rgb(0,128,19);">% rear camber compensation (%)</span></span><br/><span>casterf = deg2rad(casterf);</span><br/><span>KPIf = deg2rad(KPIf);</span><br/><span>casterr = deg2rad(casterr);</span><br/><span>KPIr = deg2rad(KPIr);</span><br/><span>IA_roll_inducedf = asin(2/twf/12);</span><br/><span>IA_roll_inducedr = asin(2/twr/12);</span><br/><span>IA_gainf = IA_roll_inducedf*IA_compensationf;</span><br/><span>IA_gainr = IA_roll_inducedr*IA_compensationr;</span></p><p><span><span style="color: rgb(0,128,19);">%% Section 5: Input Aero Parameters</span></span><br/><span><span style="color: rgb(0,128,19);">%disp('Loading Aero Model')</span></span><br/><span>rho_air = 1.225*0.062427960576145; <span style="color: rgb(0,128,19);">% density lbm/ft^3</span></span></p><p><span>Cl = 5.01; <span style="color: rgb(0,128,19);">% real coeff lift [m^2]</span></span><br/><span>Cd = 1.63; <span style="color: rgb(0,128,19);">% real coeff drag [m^2]</span></span></p><p><span>Cl = .5*rho_air*Cl*10.7639/32.2; <span style="color: rgb(0,128,19);">% [lbm/ft]</span></span><br/><span>Cd = .5*rho_air*Cd*10.7639/32.2; <span style="color: rgb(0,128,19);">% [lbm/ft]</span></span><br/><span>CoP = 50; <span style="color: rgb(0,128,19);">%54; % front downforce distribution (%)</span></span></p><p><span><span style="color: rgb(0,128,19);">% Intermediary Calculations</span></span><br/><span>CoP = CoP/100;</span></p><p><span><span style="color: rgb(0,128,19);">% Ride height change [in] use this to be more accurate with changes in</span></span><br/><span><span style="color: rgb(0,128,19);">% suspension and aero platform as changing pitch and roll gradients affect</span></span><br/><span><span style="color: rgb(0,128,19);">% how height we can run the car + RH means we can lower it - RH means it is</span></span><br/><span><span style="color: rgb(0,128,19);">% raised. Should use SUS calcultor to predict all ride rates and correct</span></span><br/><span><span style="color: rgb(0,128,19);">% setup</span></span><br/><span>RH = 0;</span></p><p><span><span style="color: rgb(0,128,19);">%% Aero Map</span></span><br/><span><span style="color: rgb(0,128,19);">%</span></span><br/><span><span style="color: rgb(0,128,19);">% Pitch_Map = deg2rad([0.189406846 0.378809552 0.568203979 0.757585989 0.946951447 -0.189406846 -0.378809552 -0.568203979]); % Pitch angle [deg]</span></span><br/><span><span style="color: rgb(0,128,19);">% Cl_pitch = [0.084 0.099 0.069 -0.062 -0.109 0.029 0.034 0.063]*.5*rho_air*10.7639/32.2; % Change in Cl with pitch</span></span><br/><span><span style="color: rgb(0,128,19);">% Cd_pitch = [0.01 -0.005 -0.002 -0.004 0.011 0.046 0.029 0.048]*.5*rho_air*10.7639/32.2; % Change in Cd with pitch</span></span><br/><span><span style="color: rgb(0,128,19);">% CoP_pitch = [0.006 0.03 0.042 -0.002 -0.018 -0.031 -0.041 -0.055]; % Change in %F with pitch</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cl_pitch = csaps(Pitch_Map,Cl_pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cd_pitch = csaps(Pitch_Map,Cd_pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.CoP_pitch = csaps(Pitch_Map,CoP_pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% RH_Map = [0.5 0.25 -0.1 -0.2 -0.3 -0.4 -0.5]; % Coupled change in ride height [in]</span></span><br/><span><span style="color: rgb(0,128,19);">% Cl_rh = [-0.288 -0.135 0.093 0.139 0.155 0.202 0.192]*.5*rho_air*10.7639/32.2; % Change in Cl with coupled ride height</span></span><br/><span><span style="color: rgb(0,128,19);">% Cd_rh = [0.052 0.04 -0.001 -0.001 -0.017 -0.047 -0.07]*.5*rho_air*10.7639/32.2; % Change in Cd with coupled ride height</span></span><br/><span><span style="color: rgb(0,128,19);">% CoP_rh = [-0.034 -0.027 0.006 0.007 0.021 0.035 0.048]; % Change in %F with coupled ride height</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cl_rh = csaps(RH_Map,Cl_rh);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.Cd_rh = csaps(RH_Map,Cd_rh);</span></span><br/><span><span style="color: rgb(0,128,19);">% Map.CoP_rh = csaps(RH_Map,CoP_rh);</span></span></p><p><span>Pitch_Map = deg2rad([0 .5]); <span style="color: rgb(0,128,19);">% Pitch angle [deg]</span></span><br/><span>Cl_pitch = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cl with pitch</span></span><br/><span>Cd_pitch = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cd with pitch</span></span><br/><span>CoP_pitch = [0 0]; <span style="color: rgb(0,128,19);">% Change in %F with pitch</span></span><br/><span>Map.Cl_pitch = csaps(Pitch_Map,Cl_pitch);</span><br/><span>Map.Cd_pitch = csaps(Pitch_Map,Cd_pitch);</span><br/><span>Map.CoP_pitch = csaps(Pitch_Map,CoP_pitch);</span></p><p><span>RH_Map = [0 .5]; <span style="color: rgb(0,128,19);">% Coupled change in ride height [in]</span></span><br/><span>Cl_rh = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cl with coupled ride height</span></span><br/><span>Cd_rh = [0 0]*.5*rho_air*10.7639/32.2; <span style="color: rgb(0,128,19);">% Change in Cd with coupled ride height</span></span><br/><span>CoP_rh = [0 0]; <span style="color: rgb(0,128,19);">% Change in %F with coupled ride height</span></span><br/><span>Map.Cl_rh = csaps(RH_Map,Cl_rh);</span><br/><span>Map.Cd_rh = csaps(RH_Map,Cd_rh);</span><br/><span>Map.CoP_rh = csaps(RH_Map,CoP_rh);</span><br/><span><span style="color: rgb(0,128,19);">% i = 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% for RH = -.5:.01:.5</span></span><br/><span><span style="color: rgb(0,128,19);">% cl(i) = fnval(Map.Cl_rh,RH);</span></span><br/><span><span style="color: rgb(0,128,19);">% rh(i)= RH;</span></span><br/><span><span style="color: rgb(0,128,19);">% i = i + 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% end</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% figure()</span></span><br/><span><span style="color: rgb(0,128,19);">% plot(rh,cl)</span></span><br/><span><span style="color: rgb(0,128,19);">% xlabel('Ride Height [in]')</span></span><br/><span><span style="color: rgb(0,128,19);">% ylabel('Change in Cl')</span></span></p><p><span><span style="color: rgb(0,128,19);">% i = 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% for Pitch = deg2rad(-.6:.01:1)</span></span><br/><span><span style="color: rgb(0,128,19);">% cl(i) = fnval(Map.Cl_pitch,Pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% pitch(i)= rad2deg(Pitch);</span></span><br/><span><span style="color: rgb(0,128,19);">% i = i + 1;</span></span><br/><span><span style="color: rgb(0,128,19);">% end</span></span><br/><span><span style="color: rgb(0,128,19);">% </span></span><br/><span><span style="color: rgb(0,128,19);">% figure()</span></span><br/><span><span style="color: rgb(0,128,19);">% plot(pitch,cl)</span></span><br/><span><span style="color: rgb(0,128,19);">% xlabel('Pitch Angle [deg]')</span></span><br/><span><span style="color: rgb(0,128,19);">% ylabel('Change in Cl')</span></span></p></div></div><div id="expander-1420848176" class="expand-container"><div role="heading" aria-level="6" id="expander-control-1420848176" class="expand-control"><button type="button" id="expand-button-1420848176" class="aui-button aui-button-link aui-button-link-icon-text" aria-expanded="true" aria-controls="expander-content-1420848176" ><span class="expand-icon aui-icon aui-icon-small aui-iconfont-chevron-down" aria-hidden="true"></span><span class="expand-control-text conf-macro-render">Change Log</span></button></div><div role="region" id="expander-content-1420848176" class="expand-content" aria-labelledby="expand-button-1420848176"><p>What was done to the file</p><ul><li>Weight 610 (pounds)</li><li>Cl to -5.01</li><li>Cd to 1.63</li><li>CG 12.22 → 11.5 (inches)</li></ul></div></div><p class="auto-cursor-target"><strong>RESULTS:</strong></p><p class="auto-cursor-target"><strong><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/270340375/270340390.png" data-image-src="attachments/270340375/270340390.png" data-unresolved-comment-count="0" data-linked-resource-id="270340390" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2023-8-30_22-31-8.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="270340375" data-linked-resource-container-version="4" alt=""></span></strong></p></div></div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/270340375/270340390.png">image-2023-8-30_22-31-8.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/270340375/270340391.png">image-2023-8-30_22-32-0.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 04, 2024 13:31</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
