<!DOCTYPE html>
<html>
    <head>
        <title>Purdue Formula SAE : ANSYS Scholar Cluster Usage</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Purdue Formula SAE</a></span>
                            </li>
                                                    <li>
                                <span><a href="Purdue-Formula-SAE-Home_127569448.html">Purdue Formula SAE Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="130158329.html">Design | Global</a></span>
                            </li>
                                                    <li>
                                <span><a href="Structures_143759622.html">Structures</a></span>
                            </li>
                                                    <li>
                                <span><a href="141728421.html">Analysis Resources | Structures</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Purdue Formula SAE : ANSYS Scholar Cluster Usage
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Unknown User (dewey2)</span>, last modified on Dec 07, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="ANSYSScholarClusterUsage-WhatisScholar?">What is Scholar?</h1><p>Scholar is a small computer cluster, suitable for classroom learning about high performance computing (HPC). The Scholar cluster allows us to run applications that are highly resource and time intensive and impractical to run on typical lab or personal computer hardware. The scholar page for more information is <strong><u><a class="external-link" href="https://www.rcac.purdue.edu/compute/scholar/" rel="nofollow">here</a></u></strong>.</p><p>If you aren't familiar with a Linux/Unix environment, there may be a bit of a learning curve to using it especially with using the console. However, there is still a decent GUI to get you through using it. <u><a class="external-link" href="https://linuxize.com/post/basic-linux-commands/" rel="nofollow"><strong>Here</strong> </a></u>is one resource (plenty others online) you can use to see some Linux commands.</p><h1 id="ANSYSScholarClusterUsage-WhyisitusefulforANSYS?">Why is it useful for ANSYS?</h1><p>ANSYS Mechanical and Fluent can be used on the Purdue Scholar computing cluster for running analyses that are high fidelity and would either 1. take a significant amount of time to run on a lab/personal computer or 2. is unable to run due to insufficient resources on the lab/personal computer.</p><p>Highly nonlinear analyses or those requiring high mesh density (i.e. millions of elements) may require more memory that is available on a lab computer or may take hours to run. Instead of spending several hours waiting for the simulation to run, it can instead by run in a fraction of the time on the Scholar cluster.</p><p>Ultimately, ANSYS on Scholar is allows us to save time on highly detailed analyses and allow for new high fidelity simulations the team has not run before.</p><h1 id="ANSYSScholarClusterUsage-HowdoIaccessScholar?">How do I access Scholar?</h1><p><u><strong>Not everyone has access to scholar by default</strong></u>. Access to Scholar is provided through specific courses or by exception with our team advisor, Todd Nelson.</p><p>If you do have access to scholar, it can be reached <strong><u><a class="external-link" href="https://desktop.scholar.rcac.purdue.edu:300/main/" rel="nofollow">here</a></u></strong>.</p><h1 id="ANSYSScholarClusterUsage-Scholar/SlurmResources">Scholar/Slurm Resources</h1><p>As an aside, here are links to some resources I used to figure all this stuff out, as I previously had zero clue how to use scholar or make any bash scripts.</p><p>Slurm documentation (link goes to sbatch specifically): <a class="external-link" href="https://slurm.schedmd.com/sbatch.html" rel="nofollow">https://slurm.schedmd.com/sbatch.html</a></p><p>Purdue Slurm documentation: <a class="external-link" href="https://www.rcac.purdue.edu/knowledge/scholar/run/rosetta/stone" rel="nofollow">https://www.rcac.purdue.edu/knowledge/scholar/run/rosetta/stone</a></p><p>ANSYS HPC: <a class="external-link" href="https://www.nrel.gov/hpc/eagle-software-ansys-fluent.html" rel="nofollow">https://www.nrel.gov/hpc/eagle-software-ansys-fluent.html</a></p><p>Iowa State ANSYS HPC Script: <a class="external-link" href="https://www.hpc.iastate.edu/guides/sample-job-scripts/ansys-mapdl" rel="nofollow">https://www.hpc.iastate.edu/guides/sample-job-scripts/ansys-mapdl</a></p><p>Another example: <a class="external-link" href="https://www.hkhlr.de/sites/default/files/field_download_file/HKHLR-HowTo-Ansys_MAPDL.pdf" rel="nofollow">https://www.hkhlr.de/sites/default/files/field_download_file/HKHLR-HowTo-Ansys_MAPDL.pdf</a></p><p>ANSYS Launch Arguments: <a class="external-link" href="https://mapdl.docs.pyansys.com/contribution_and_api/_autosummary/ansys.mapdl.core.launch_mapdl.html" rel="nofollow">https://mapdl.docs.pyansys.com/contribution_and_api/_autosummary/ansys.mapdl.core.launch_mapdl.html</a></p><p>Google is your friend, especially for figuring out bash syntax. This is not an exhaustive list of resources I used to make all this.</p><h1 id="ANSYSScholarClusterUsage-HowdoIrunANSYSMechanicalSimulations?">How do I run ANSYS Mechanical Simulations?</h1><p>There are several steps to run an ANSYS simulation on Scholar.</p><h2 id="ANSYSScholarClusterUsage-OverallSteps">Overall Steps</h2><ol><li>Set up simulation on personal/lab computer</li><li>Create input file</li><li>Access scholar, set up file system</li><li>Configuring ANSYS batch files for sim</li><li>Run simulation</li><li>Retrieve results file</li><li>Reading results on personal/lab computer</li></ol><h2 id="ANSYSScholarClusterUsage-SettingupsimulationonPersonal/LabComputer">Setting up simulation on Personal/Lab Computer</h2><p><strong>The simulation setup process involves getting everything in the ANSYS model set up to the point where you are ready to click solve</strong></p><p>This is no different than any other analysis: get your material assignments, contacts, joints, loads, constraints, mesh, etc.</p><p>It is strongly recommended that you run a low fidelity mesh version of your analysis to ensure that there are no errors occurring in the model. This is a lot easier to troubleshoot than after you've sent stuff to the Scholar cluster.</p><p>If a low fidelity version runs fine, change your mesh and other parameters to what you want the first Scholar run to be.</p><h2 id="ANSYSScholarClusterUsage-CreateInputFile">Create Input File</h2><p>Once the simulation is fully set up to the point where it is ready to solve, it is time to generate the input file for the problem. This input file contains all of the setup and mesh that ANSYS will run. <strong>It is important not to change anything in ANSYS once this input file has been made</strong>. For example, if you run the input file on Scholar, changed your mesh, and then tried to read the results file, it wouldn't work because the mesh is completely different.</p><p>To generate the input file, click on the Static Structural tab on the left tree (or Modal or whatever you're running) or the solution tab and click Write Input File on the top bar. A popup will come up indicating where it should save this input file to. Make sure the file type is set to &quot;APDL Input Files (*.inp)&quot;. Name the input file as appropriate. Example below:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="1000" src="attachments/176128515/176128529.png" data-image-src="attachments/176128515/176128529.png" data-unresolved-comment-count="0" data-linked-resource-id="176128529" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_11-47-14.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></p><h2 id="ANSYSScholarClusterUsage-AccessingScholarandSettinguptheFilesystem">Accessing Scholar and Setting up the Filesystem</h2><p>Scholar is accessed at this linkÂ <strong><u><a class="external-link" href="https://desktop.scholar.rcac.purdue.edu:300/main/" rel="nofollow">here</a></u></strong>.</p><p>Once logged in, click OK on the popup and then you will be greeted to your desktop in Scholar. What we want to do now is set up an organized file system so you can efficiently run ANSYS simulations.</p><p>Open the file manager (filing cabinet on the bottom bar):</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/176128515/176128537.png" data-image-src="attachments/176128515/176128537.png" data-unresolved-comment-count="0" data-linked-resource-id="176128537" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_11-57-52.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></p><p>Next, we want to change our directory to the scratch folder of the user account, as this is where we will store all of the ANSYS data. In the address bar, enter: /scratch/scholar/ and find your user folder. Once found, click and drag it to the left hand side under the Places section. This will create a shortcut so you can quickly access it later on.</p><p><u><strong>The overall file system should look like this:</strong></u></p><ul style="list-style-type: square;"><li>scratch<ul style="list-style-type: square;"><li>scholar<ul style="list-style-type: square;"><li>dewey2 (your username here)<ul style="list-style-type: square;"><li>ANSYSÂ <ul style="list-style-type: square;"><li>ANSYS_RUN.sh Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â Script to direct scholar submission to ANSYS</li><li>ANSYS_SUBMIT.sh Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â â Script to submit job to scholar (discussed later)</li><li>CV_InsertÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â Folder to store part/assembly iterations<ul style="list-style-type: square;"><li>CV_Insert_1 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â Sub-folders to store data for one iteration<ul style="list-style-type: square;"><li>CV_Insert_1.inpÂ  Â  Â  â Input file placed here (see naming is equivalent to parent folder)</li></ul></li><li>CV_Insert_2<ul style="list-style-type: square;"><li>CV_Insert_2.inp</li></ul></li><li>CV_Insert_3<ul style="list-style-type: square;"><li>CV_Insert_3.inp</li></ul></li></ul></li><li>some_part<ul style="list-style-type: square;"><li>some_part_02mesh<ul style="list-style-type: square;"><li>some_part_02mesh.inp</li></ul></li><li>some_part_04mesh<ul style="list-style-type: square;"><li>some_part_04mesh.inp</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><p>Here you have the scratch user folder (dewey2) with an ANSYS folder created inside. In the ANSYS folder, there are sub folder for each part/assembly to be analyzed. In each of these sub-folders, folders are made for each simulation run since you will certainly have iterations. <u><strong>The name of the subfolders inside the part/assembly folders should match the name of the input file.</strong></u></p><p>This is an example of mine for the CV inserts (see the filepath and folders). Each of these folders has an input file with a matching filename inside:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/176128515/176128545.png" data-image-src="attachments/176128515/176128545.png" data-unresolved-comment-count="0" data-linked-resource-id="176128545" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_12-9-16.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></p><p><strong>A streamlined and organized file system makes running sims very simple. Do not use spaces in file names, it just makes things more difficult. Do underscores instead.</strong></p><p>Great, now you have a file system set up, now you need the files. Namely, the input file you made and the batch files to run the simulation. To do that, you need to add a network drive on your computer which will access your scholar scratch folder. The address to your scratch folder is the following:Â </p><p>\\<a class="external-link" href="http://scratch.scholar.rcac.purdue.edu" rel="nofollow">scratch.scholar.rcac.purdue.edu</a>\<span>scholar-scratch</span></p><p><span>Credentials are your Purdue username and non-2 factor password. Once in there, verify you can see all the folders you made.</span></p><p><br/></p><p><span>Now you can copy your input file to the designated sim folder (such as cv_insert_half_1 for example in the above picture).</span></p><p><span>The batch files (downloadable below) should be placed in your ANSYS folder, not in a specific component folder.</span></p><p><span><strong>Consider using the ANSYS_SUBMIT.sh with added Tmux functionality located here: <span style="color: rgb(0,0,0);"><a href="ANSYS-Scholar-Tmux-Submit-Script_244778545.html">ANSYS Scholar Tmux Submit Script</a></span>.</strong> The submit script below is a simple submission with less features.</span></p><p><span><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/176128515/ANSYS_SUBMIT.sh?version=3&amp;modificationDate=1664459455000&amp;api=v2" data-nice-type="null" data-file-src="/download/attachments/176128515/ANSYS_SUBMIT.sh?version=3&amp;modificationDate=1664459455000&amp;api=v2" data-linked-resource-id="176128550" data-linked-resource-type="attachment" data-linked-resource-container-id="176128515" data-linked-resource-default-alias="ANSYS_SUBMIT.sh" data-mime-type="application/x-upload-data" data-has-thumbnail="false" data-linked-resource-version="3" data-can-edit="true" aria-label="ANSYS_SUBMIT.sh" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-small-file.png" height="150" alt="" draggable="false"/><span class="title">ANSYS_SUBMIT.sh</span></a><span class="companion-edit-button-placeholder edit-button-overlay" data-linked-resource-container-id="176128515" data-linked-resource-id="176128550" data-template-name="companionEditIcon" data-source-location="embedded-attachment"></span></span><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/176128515/ANSYS_RUN.sh?version=3&amp;modificationDate=1664457808000&amp;api=v2" data-nice-type="null" data-file-src="/download/attachments/176128515/ANSYS_RUN.sh?version=3&amp;modificationDate=1664457808000&amp;api=v2" data-linked-resource-id="176128551" data-linked-resource-type="attachment" data-linked-resource-container-id="176128515" data-linked-resource-default-alias="ANSYS_RUN.sh" data-mime-type="application/x-upload-data" data-has-thumbnail="false" data-linked-resource-version="3" data-can-edit="true" aria-label="ANSYS_RUN.sh" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-small-file.png" height="150" alt="" draggable="false"/><span class="title">ANSYS_RUN.sh</span></a><span class="companion-edit-button-placeholder edit-button-overlay" data-linked-resource-container-id="176128515" data-linked-resource-id="176128551" data-template-name="companionEditIcon" data-source-location="embedded-attachment"></span></span></span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/176128515/176128552.png" data-image-src="attachments/176128515/176128552.png" data-unresolved-comment-count="0" data-linked-resource-id="176128552" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_12-19-16.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></span></p><h2 id="ANSYSScholarClusterUsage-ConfiguringBatchFilestoRunANSYSSimulation">Configuring Batch Files to Run ANSYS Simulation</h2><p>The batch files are shell scripts run from the console to submit and run the simulations. There are a few things to understand about Scholar before configuring the batch files.</p><ol><li>Resources are allocated by nodes and cores (also referred to as CPUs). Each node has 20 cores. Each node is a physical machine with CPU, memory, and local storage. Each node is connected together to form the cluster as a whole.</li><li>Resources are limited. In the console, type slist to see the available resources on scholar<ol><li><strong>10/6/2022 - slist is bugged on scholar, use sinfo instead and look for the scholar -a row with the status as &quot;idle&quot; for available nodes, ignore (b) and (c)</strong></li><li><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="150" src="attachments/176128515/176128555.png" data-image-src="attachments/176128515/176128555.png" data-unresolved-comment-count="0" data-linked-resource-id="176128555" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_12-21-33.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></li><li>At the time of making this, there are 140 cores free, or 7 nodes assuming none are split between nodes</li><li>I typically request in increments of 20 cores to fully utilize a node, however it is not required.</li><li>Do not hog all of the resources, if you know you don't need a significant amount of cores, don't take as much as you can. Try to use 20-60 at a time.</li></ol></li><li>You can see yours and other's simulation queues using squeue.<ol><li><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="150" src="attachments/176128515/176128556.png" data-image-src="attachments/176128515/176128556.png" data-unresolved-comment-count="0" data-linked-resource-id="176128556" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_12-24-34.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></li><li>This is just a short snippet, but you can see users, node allocation sources (these were long and debug rather than scholar), job name, resources used, time requested, etc</li><li>To see your queue do: squeue -u yourusernamehere (ex: squeue -u dewey2)</li><li><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="600" src="attachments/176128515/176128557.png" data-image-src="attachments/176128515/176128557.png" data-unresolved-comment-count="0" data-linked-resource-id="176128557" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-24_12-25-39.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span><ol><li>Some sims on scholar. The second to last time is the requested walltime (allocated time) and the last column is the elapsed time</li><li>If you hit your walltime, you lose allocation to those nodes, so make sure you allocate time appropriately</li></ol></li></ol></li></ol><p>With basics out of the way, we can set up the batch file. Right click the ANSYS_SUBMIT.sh file and click &quot;Open with &quot;Text Editor&quot;&quot;. You may have to do &quot;Open With &gt;&quot; and then find the text editor in there. You can use other text editors, this one is just basic and simple.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/176128515/237081109.png" data-image-src="attachments/176128515/237081109.png" data-unresolved-comment-count="0" data-linked-resource-id="237081109" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2022-9-29_21-19-16.png" data-base-url="https://wiki.itap.purdue.edu" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176128515" data-linked-resource-container-version="19" alt=""></span></p><p>This is what you will see. All of the blue is commented sections that do not get run. This file allows for multiple simulations to be run. To do this, copy from ## Job 1 to the bottom row of #'s and paste it below for a second job.</p><p>The parameters required for setup are:</p><h4 id="ANSYSScholarClusterUsage-Assigningthejobnameâ(exportJOBNAME=&quot;jobname&quot;line)">Assigning the job name Â âÂ  (export JOBNAME =&quot;jobname&quot; line)</h4><ol><li style="list-style-type: none;"><ol><li>Your job name should match the name of your input file and folder storing your iteration<ol><li>So like &quot;CV_Insert_1&quot; if following the file structure example presented</li></ol></li><li>Do not include the .inp for this</li><li>Example: my input file is &quot;part1.inp&quot;. My job name will be &quot;part1&quot;.</li></ol></li></ol><h4 id="ANSYSScholarClusterUsage-Settingthejobpathâ(exportJOBPATH=&quot;${PWD}/fr_brake_rotor/$JOBNAME/&quot;line)">Setting the job path Â  âÂ  (export JOBPATH=&quot;${PWD}/fr_brake_rotor/$JOBNAME/&quot; line)</h4><ol><li style="list-style-type: none;"><ol><li>The job path will need to be changed depending on the folder you are running the simulation from</li><li>Continuing the CV insert example, the job path would be &quot;CV_Insert&quot; because that is my folder that is storing the sub-folders for each iteration<ol><li>So inside ANSYS/CV_Insert/ there is a folder named &quot;CV_Insert_1&quot; and inside that folder is an input file named identically &quot;CV_Insert_1.inp&quot;</li><li>In reality, you can tweak this script if you wanted different names, but I find this to be a simple solution so you have less inputs to the script</li></ol></li><li>The job path begins with $PWD which is the current directory (the ANSYS folder)</li></ol></li></ol><h4 id="ANSYSScholarClusterUsage-Settingtheemailnotificationâ(exportNOTIF_TYPE=&quot;END&quot;line)">Setting the email notification Â  â (export NOTIF_TYPE=&quot;END&quot; line)</h4><ol><li style="list-style-type: none;"><ol><li>See header of file for other options besides the default &quot;END&quot;</li><li>If you don't want emails, do NONE</li></ol></li></ol><h4 id="ANSYSScholarClusterUsage-Settingyouremailâ(exportEMAIL_ADR=&quot;youremail@purdue.edu&quot;line)">Setting your email Â  â (export EMAIL_ADR=&quot;youremail@purdue.edu&quot; line)</h4><h4 id="ANSYSScholarClusterUsage-Settingtheclusterâ(exportCLUSTER=&quot;scholar&quot;)">Setting the cluster Â  â (export CLUSTER=&quot;scholar&quot;)</h4><ol><li style="list-style-type: none;"><ol><li>I recommend using scholar unless there are insufficient resources available</li><li>In that case, try &quot;long&quot;<ol><li>Job will take longer to run, but is generally less used</li><li>Cores can be requested for longer time (see wall time section below)</li></ol></li></ol></li></ol><h4 id="ANSYSScholarClusterUsage-Settingthewalltimeâ(exportWALLTIME=&quot;240&quot;line)">Setting the wall time Â  â (export WALLTIME=&quot;240&quot; line)</h4><ol><li style="list-style-type: none;"><ol><li>The wall time should be set appropriately for how long you think you need the resources</li><li>Wall time is inputted in minutes â 240 = 4 hours</li><li>Maximum wall time<ol><li>Scholar â 4 hours</li><li>Long â 3 days</li><li>You can verify these by seeing the max walltime with slist</li></ol></li><li>For scholar, start with 4 hour requests until you know how long it takes, then you can request for a shorter time if you'd like</li></ol></li></ol><h4 id="ANSYSScholarClusterUsage-Settingthenumberofcoresâ(exportPROCS=&quot;40&quot;line)">Setting the number of coresÂ  â (export PROCS=&quot;40&quot; line)</h4><ol><li style="list-style-type: none;"><ol><li>The number of cores (PROCS in the script) should be set appropriately as well, depending on:<ol><li>Available resources (slist/sinfo)</li><li>How many cores you think you need. Typically, it is 20 or 40 (1 or 2 nodes)</li></ol></li><li>Increasing cores will not linearly reduce your solution time<ol><li>Double cores will not half your solution time but will certainly reduce it</li></ol></li></ol></li></ol><p><br/></p><p>Next, save the ANSYS_SUBMIT.sh file and open up a console window (black box on bottom bar). Change your directory to where the ANSYS script files are located (cd /scratch/scholar/yourusername/ANSYS)</p><p>We need to make the ANSYS_SUBMIT.sh and ANSYS_RUN.sh files executables so we can run it in console. In your console window with the directory set to the ANSYS folder type: chmod +x ANSYS_SUBMIT.sh</p><p>Repeat this for ANSYS_RUN.sh: chmod +x ANSYS_RUN.sh</p><p>Press enter and now you have all of the scripting setup, assuming all information is entered correctly.</p><h2 id="ANSYSScholarClusterUsage-RunningtheSimulationBatchFile">Running the Simulation Batch File</h2><p>If this is the first time trying to run something â Before you run, just verify that your input file matches the name of the folder it is placed in and that the job name and file path are correct.</p><p>To run, set your console directory to the location of the ANSYS_SUBMIT.sh file (cd /scratch/scholar/yourusername/ANSYS) and type ./ANSYS_SUBMIT.sh</p><p>It should give you a &quot;Submitted batch job&quot; and a string of numbers for the job number assigned. You can check the status of the job using squeue -u yourusername</p><p>If it ends shorter than it should, you probably got an error. If it's on the Scholar/SLURM side of things, the error file should be in the ANSYS folder or in the folder with the input file. If it's on the ANSYS side if you had an error with your model, it'll show up in the file named: yourjobname.out which is located where your input file is. Near the bottom of that file should indicate what the error was that caused ANSYS to abort solving.</p><p>If you opted for the emails (which you should) that will also give an indication of what happened, it may say &quot;COMPLETED&quot;, &quot;FAILED&quot;, &quot;ABORTED&quot;, etc which can lead you in the right direction</p><h2 id="ANSYSScholarClusterUsage-RetrievingtheResultsFile">Retrieving the Results File</h2><p>Once the simulation is done running, you will have a file with the same name as your input file and job name with the file extension .rst. This is the results file from the simulation. You may see _0.rst, _1.rst.... ignore these, these are per node. You will also know if it is done if you do not have anything in the queue anymore.</p><p>Copy this results file (yourjobname.rst) to your computer.</p><h2 id="ANSYSScholarClusterUsage-ReadingtheResultsonaLab/PersonalComputer">Reading the Results on a Lab/Personal Computer</h2><p>With the results file copied over, click on the solution tab in ANSYS and click read results file on the top bar. Select the results file and it will read in the results. From there, you can add the typical equivalent stress, deformation, etc as you would with any other simulation.</p><h1 id="ANSYSScholarClusterUsage-Wrap-Up">Wrap-Up</h1><p>This is how to full set up and run an ANSYS simulation on Scholar. The majority of the time is spent understanding and doing the setup. Once everything is set up, running simulations is pretty quick provided you don't have issues with your model. This is a super useful tool and is necessary for complicated analyses.</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128529.png">image2021-3-24_11-47-14.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128537.png">image2021-3-24_11-57-52.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128538.png">image2021-3-24_11-58-43.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128539.png">image2021-3-24_11-58-50.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128541.png">image2021-3-24_12-5-55.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128544.png">image2021-3-24_12-7-59.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128545.png">image2021-3-24_12-9-16.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/237080907.sh">ANSYS_SUBMIT.sh</a> (application/x-sh)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/237076660.sh">ANSYS_RUN.sh</a> (application/x-sh)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128552.png">image2021-3-24_12-19-16.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128555.png">image2021-3-24_12-21-33.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128556.png">image2021-3-24_12-24-34.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128557.png">image2021-3-24_12-25-39.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128559.png">image2021-3-24_12-28-34.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/237080908.sh">ANSYS_RUN.sh</a> (application/x-upload-data)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/237080909.sh">ANSYS_SUBMIT.sh</a> (application/x-upload-data)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128551.sh">ANSYS_RUN.sh</a> (application/x-upload-data)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/176128550.sh">ANSYS_SUBMIT.sh</a> (application/x-upload-data)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176128515/237081109.png">image2022-9-29_21-19-16.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 04, 2024 13:25</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
